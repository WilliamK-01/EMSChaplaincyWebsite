<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager - EMS Chaplaincy</title>
</head>
<body>
    <!-- Decap CMS -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <script>
        // Apply site styles inside the preview pane
        CMS.registerPreviewStyle("/styles.css");

        const React = CMS.React;
        const h = React.createElement;

        const BlogPreview = ({ entry, widgetFor }) => {
            const title = entry.getIn(["data", "title"]);
            const date = entry.getIn(["data", "date"]);
            const description = entry.getIn(["data", "description"]);
            const image = entry.getIn(["data", "featured_image"]);

            return h(
                "article",
                { className: "max-w-3xl mx-auto p-6 prose prose-invert bg-slate-900 rounded-xl" },
                h("h1", null, title),
                date
                    ? h(
                          "p",
                          { className: "text-sm text-slate-400" },
                          new Date(date).toLocaleDateString()
                      )
                    : null,
                image
                    ? h("img", {
                          src: image,
                          alt: title || "Featured image",
                          style: { width: "100%", borderRadius: "12px" }
                      })
                    : null,
                description ? h("p", { className: "text-lg text-slate-200" }, description) : null,
                widgetFor("body")
            );
        };

        CMS.registerPreviewTemplate("blog", BlogPreview);
    </script>
</body>
</html>
